<!DOCTYPE html>
<html>
<head>
<title></title>
<style type="text/css">
.container {
  display: flex;
  flex-direction: column;
  align-items: center;
}

#form {
  display: flex;
  flex-direction: column;
  align-items: center;
}

#textarea {
  width: 100%;
  height: 100px;
  padding: 12px 20px;
  box-sizing: border-box;
  border: 2px solid #ccc;
  border-radius: 4px;
  background-color: #f8f8f8;
  resize: none;
  outline:none;
}

#generate-button {
  width: 100%;
  padding: 14px 20px;
  background-color: #7d3cff;
  color: white;
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

#generated-image {
  max-width: 500px;
  width: 100%;
}

.hidden {
  display: none;
}

#download-button {
  background-color: #ff5e6c;
  color: white;
  width: 100%;
  padding: 12px 20px;
  border: none;
  border-radius: 4px;
  cursor: none;
  font-size: 15px;
  margin-top: 20px;
}

#download-button:hover {
  background-color: #3e8e41;
}



</style>
</head>
<body>

<div class="container">
  <form id="form">
    <textarea id="textarea" rows="4" cols="50" placeholder="Enter text to generate image"></textarea>
    <br>
    <button id="generate-button">Generate Image</button>
    <button id="download-button">Download</button>
  </form>
  <br>
  <img id="generated-image" class="hidden" src="" alt="Generated Image">
  	

</div>


<script type="text/javascript">

const generateButton = document.getElementById('generate-button');
const downloadButton = document.getElementById('download-button');
const textarea = document.getElementById('textarea');
const generatedImage = document.getElementById('generated-image');

generateButton.addEventListener('click', async (event) => {
  event.preventDefault();

  generatedImage.classList.add('hidden');

  const text = textarea.value;

  const response = await fetch('https://api.openai.com/v1/images/generations', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
      'Authorization': 'Bearer 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',
    },
    body: JSON.stringify({
      model: 'image-alpha-001',
      prompt: text,
    }),
  });

  const json = await response.json();
  generatedImage.src = '';
  generatedImage.src = json.data[0].url;

  generatedImage.classList.remove('hidden');

  downloadButton.addEventListener('click', (event) => {
    event.preventDefault();

    const a = document.createElement('a');
    a.href = generatedImage.src;
    a.download = 'generated-image.png';
    a.click();
  });
});

</script>
</body>
</html>